<!--
Copyright 2017 The WPT Dashboard Project. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="../bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="test-runs.html">
<link rel="import" href="test-run.html">
<link rel="import" href="test-file-results-table-terse.html">
<link rel="import" href="test-file-results-table-verbose.html">

<dom-module id="test-file-results">
  <template>
    <style>
      :host {
        display: block;
        font-size: 16px;
      }
      h1 {
        font-size: 1.5em;
      }
      .right {
        display: flex;
        justify-content: flex-end;
      }
      .right .pad {
        padding: 8px;
      }
      paper-toggle-button {
        --paper-toggle-button-checked-bar-color:  var(--paper-blue-500);
        --paper-toggle-button-checked-button-color:  var(--paper-blue-700);
        --paper-toggle-button-checked-ink-color: var(--paper-blue-300);
      }
    </style>

    <div class="right">
      <label class="pad">Expand</label>
      <paper-toggle-button class="pad" checked="{{isVerbose}}">
      </paper-toggle-button>
    </div>

    <template is="dom-if" if="{{!isVerbose}}">
      <test-file-results-table-terse
          path="[[path]]"
          test-runs="[[testRuns]]"
          subtest-names="[[subtestNames]]">
      </test-file-results-table-terse>
    </template>

    <template is="dom-if" if="{{isVerbose}}">
        <test-file-results-table-verbose
            path="[[path]]"
            test-runs="[[testRuns]]"
            subtest-names="[[subtestNames]]">
        </test-file-results-table-verbose>
      </template>
  </template>

  <script>
    /* global TestRunsBase */
    class TestFileResults extends TestRunsBase {
      static get is() {
        return 'test-file-results';
      }

      static get properties() {
        return {
          isVerbose: {
            type: Boolean,
            value: false,
          },
        };
      }

      async connectedCallback() {
        await super.connectedCallback();
        console.assert(this.path);
        console.assert(this.path[0] === '/');
      }
    }

    window.customElements.define(TestFileResults.is, TestFileResults);
  </script>
</dom-module>
